<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”Ÿæ—¥å¿«ä¹ - æè‰³è€å©†</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <!-- GSAP åŠ¨ç”»åº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <!-- è‡ªå®šä¹‰ Tailwind é…ç½® -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#FF6B9D',
                        secondary: '#4ECDC4',
                        accent: '#FFE66D',
                        dark: '#292F36',
                        light: '#F7FFF7'
                    },
                    fontFamily: {
                        sans: ['Arial', 'sans-serif'],
                        cursive: ['Comic Sans MS', 'cursive']
                    },
                    animation: {
                        'float': 'float 3s ease-in-out infinite',
                        'bounce-slow': 'bounce 3s infinite',
                        'pulse-slow': 'pulse 4s cubic-bezier(0.4, 0, 0.6, 1) infinite',
                        'heart-beat': 'heart-beat 1.5s ease-in-out infinite',
                        'confetti': 'confetti 3s ease-in-out forwards'
                    },
                    keyframes: {
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-10px)' }
                        },
                        heart-beat: {
                            '0%, 100%': { transform: 'scale(1)' },
                            '50%': { transform: 'scale(1.2)' }
                        },
                        confetti: {
                            '0%': { transform: 'translateY(-100px) rotate(0deg)', opacity: 1 },
                            '100%': { transform: 'translateY(100vh) rotate(720deg)', opacity: 0 }
                        }
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .text-shadow {
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
            }
            .text-shadow-lg {
                text-shadow: 4px 4px 8px rgba(0, 0, 0, 0.5);
            }
            .gradient-bg {
                background: linear-gradient(135deg, #FF6B9D 0%, #4ECDC4 100%);
            }
            .gradient-text {
                background-clip: text;
                -webkit-background-clip: text;
                color: transparent;
                background-image: linear-gradient(135deg, #FF6B9D 0%, #4ECDC4 100%);
            }
            .bubble {
                position: absolute;
                border-radius: 50% 50% 50% 50% / 60% 60% 40% 40%;
                animation: float 3s ease-in-out infinite;
                transform-origin: center;
                box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
                transition: all 0.3s ease;
            }
            .bubble:hover {
                transform: scale(1.1);
                z-index: 100;
            }
            .particle {
                position: absolute;
                border-radius: 50%;
                pointer-events: none;
            }
            .heart {
                position: absolute;
                width: 20px;
                height: 20px;
                background: #FF6B9D;
                transform: rotate(45deg);
                animation: heart-beat 1.5s ease-in-out infinite;
                pointer-events: none;
                z-index: 999;
            }
            .heart::before, .heart::after {
                content: '';
                position: absolute;
                width: 20px;
                height: 20px;
                background: #FF6B9D;
                border-radius: 50%;
            }
            .heart::before {
                top: -10px;
                left: 0;
            }
            .heart::after {
                top: 0;
                left: -10px;
            }
            .confetti {
                position: absolute;
                width: 10px;
                height: 10px;
                pointer-events: none;
                z-index: 998;
            }
        }
    </style>
    <style>
        /* å…¨å±€æ ·å¼ */
        body {
            overflow: hidden;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f0f0f0;
            touch-action: manipulation; /* ä¼˜åŒ–ç§»åŠ¨ç«¯è§¦æ‘¸ */
        }
        
        /* ç”»é¢å®¹å™¨ */
        .screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease, transform 1s ease;
        }
        
        /* å¯†ç è¾“å…¥æ¡†æ ·å¼ */
        .password-input {
            padding: 12px 15px;
            border: 2px solid #ccc;
            border-radius: 25px;
            font-size: 16px;
            text-align: center;
            outline: none;
            transition: border-color 0.3s ease, transform 0.2s ease;
            width: 100%;
            max-width: 250px;
            min-height: 48px;
        }
        
        .password-input:focus {
            border-color: #FF6B9D;
            box-shadow: 0 0 10px rgba(255, 107, 157, 0.3);
            transform: scale(1.02);
        }
        
        /* æŒ‰é’®æ ·å¼ */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 8px;
            outline: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            min-height: 48px;
            min-width: 80px;
            touch-action: manipulation;
            user-select: none;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #FF6B9D 0%, #FF8E53 100%);
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 107, 157, 0.3);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #4ECDC4 0%, #556270 100%);
            color: white;
        }
        
        .btn-secondary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(78, 205, 196, 0.3);
        }
        
        /* èŠå¤©æ°”æ³¡æ ·å¼ */
        .chat-bubble {
            position: absolute;
            max-width: 200px;
            padding: 15px;
            border-radius: 20px;
            background: linear-gradient(135deg, rgba(255, 107, 157, 0.9) 0%, rgba(78, 205, 196, 0.9) 100%);
            color: white;
            font-size: 14px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            opacity: 0;
            transform: scale(0);
            transition: all 0.5s ease;
            z-index: 10;
            cursor: move; /* æ‹–æ‹½å…‰æ ‡ */
        }
        
        .chat-bubble::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 20px;
            border-width: 10px 10px 0;
            border-style: solid;
            border-color: rgba(255, 107, 157, 0.9) transparent;
            display: block;
            width: 0;
            z-index: 1;
        }
        
        .chat-bubble.active {
            transform: scale(1.15);
            box-shadow: 0 0 20px rgba(255, 107, 157, 0.6);
            z-index: 20;
        }
        
        /* æ°”æ³¡äº’åŠ¨æŒ‰é’® */
        .bubble-actions {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .chat-bubble:hover .bubble-actions {
            opacity: 1;
        }
        
        .bubble-btn {
            background: rgba(255, 255, 255, 0.8);
            border: none;
            border-radius: 50%;
            width: 25px;
            height: 25px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #FF6B9D;
            transition: all 0.2s ease;
        }
        
        .bubble-btn:hover {
            background: white;
            transform: scale(1.2);
        }
        
        /* æ’­æ”¾/æš‚åœæŒ‰é’® */
        .play-pause-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: #FF6B9D;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            touch-action: manipulation;
        }
        
        .play-pause-btn:hover {
            background: white;
            transform: scale(1.1);
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
        }
        
        /* ç²’å­æ•ˆæœå®¹å™¨ */
        #particles-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }
        
        /* æ ‡é¢˜æ ·å¼ */
        .title {
            font-size: 48px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 20px;
            opacity: 0;
            transform: translateY(20px);
            transition: all 1s ease;
            cursor: pointer;
        }
        
        /* éšè—ç”»é¢ */
        .hidden {
            opacity: 0;
            transform: scale(0.8);
            pointer-events: none;
        }
        
        /* éŸ³é¢‘æ§åˆ¶æ  */
        .audio-control {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(255, 255, 255, 0.9);
            padding: 10px 15px;
            border-radius: 30px;
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            z-index: 999;
        }
        
        .volume-slider {
            width: 100px;
            accent-color: #FF6B9D;
        }
    </style>
</head>
<body>
    <!-- éŸ³é¢‘å…ƒç´  - ç”Ÿæ—¥ç¥ç¦æ­Œ -->
    <audio id="birthday-audio" loop>
        <source src="https://www.soundjay.com/misc/sounds/birthday-song-1.mp3" type="audio/mpeg">
        <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
        <source src="https://www.soundjay.com/music/sounds/birthday-music-box-1.mp3" type="audio/mpeg">
        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾
    </audio>

    <!-- äº’åŠ¨éŸ³æ•ˆ -->
    <audio id="click-sound" preload="auto">
        <source src="https://www.soundjay.com/button/sounds/button-09.mp3" type="audio/mpeg">
    </audio>
    <audio id="heart-sound" preload="auto">
        <source src="https://www.soundjay.com/button/sounds/button-10.mp3" type="audio/mpeg">
    </audio>

    <!-- ç¬¬ä¸€ç”»é¢ï¼šå¯†ç éªŒè¯ -->
    <div id="screen1" class="screen gradient-bg">
        <div class="text-center p-6 sm:p-8 bg-white bg-opacity-90 rounded-3xl shadow-xl max-w-md w-full mx-4 transform transition-all duration-500 hover:scale-105">
            <h1 class="text-2xl sm:text-4xl font-bold mb-4 sm:mb-6 gradient-text">ç”Ÿæ—¥å¿«ä¹ï¼Œæè‰³è€å©†ï¼</h1>
            <p class="text-gray-600 mb-4 sm:mb-6 text-sm sm:text-base">è¯·è¾“å…¥ç”Ÿæ—¥å¯†ç </p>
            <input type="password" id="password" class="password-input mb-4 sm:mb-6" placeholder="è¯·è¾“å…¥å¯†ç ">
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <button id="confirm-btn" class="btn btn-primary w-full sm:w-auto">
                    <i class="fa fa-check"></i> ç¡®å®š
                </button>
                <button id="cancel-btn" class="btn btn-secondary w-full sm:w-auto">
                    <i class="fa fa-times"></i> å–æ¶ˆ
                </button>
            </div>
        </div>
    </div>

    <!-- ç¬¬äºŒç”»é¢ï¼šç¥ç¦æ°”æ³¡ -->
    <div id="screen2" class="screen hidden" style="background-image: url('https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/a80eaba3be284921be90c2b906e51821~tplv-a9rns2rl98-image.image?rcl=202511251645282E1CDFDC3EBD08D4FBCD&amp;rk3s=8e244e95&amp;rrcfp=f06b921b&amp;x-expires=1766652348&amp;x-signature=4%2B23EzPgthhdan%2FzoT5g2yVHia0%3D'); background-size: cover; background-position: center;">
        <div id="bubbles-container" class="relative w-full h-full"></div>
        
        <!-- éŸ³é¢‘æ§åˆ¶æ  -->
        <div class="audio-control">
            <button id="play-pause-btn" class="play-pause-btn">
                <i class="fa fa-play"></i>
            </button>
            <input type="range" id="volume-slider" class="volume-slider" min="0" max="1" step="0.1" value="0.7">
        </div>
        
        <button id="next-btn" class="btn btn-primary absolute bottom-10 right-10">
            <i class="fa fa-arrow-right"></i> ä¸‹ä¸€é¡µ
        </button>
    </div>

    <!-- ç¬¬ä¸‰ç”»é¢ï¼šç²’å­æ•ˆæœ -->
    <div id="screen3" class="screen hidden" style="background-image: url('https://p3-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/be52ff46a2ed46d8b70f39843738a020~tplv-a9rns2rl98-image.image?rcl=202511251645282E1CDFDC3EBD08D4FBCD&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1766652358&x-signature=1ia8a%2FT7FFjR7dOCKmfIJO5ABso%3D'); background-size: cover; background-position: center;">
        <div id="particles-container"></div>
        <h1 id="name-title" class="title text-3xl sm:text-6xl font-bold text-white text-shadow-lg">æè‰³è€å©†</h1>
        <h2 id="birthday-title" class="title text-2xl sm:text-4xl font-bold text-white text-shadow-lg">Happy Birthday</h2>
        <div class="flex flex-col sm:flex-row justify-center gap-4 mt-6 sm:mt-10 px-4">
            <button id="back-to-second-btn" class="btn btn-secondary w-full sm:w-auto">
                <i class="fa fa-arrow-left"></i> è¿”å›ç¬¬äºŒé¡µ
            </button>
            <button id="restart-btn" class="btn btn-primary w-full sm:w-auto">
                <i class="fa fa-refresh"></i> é‡æ–°å¼€å§‹
            </button>
        </div>
    </div>

    <script>
        // è€å…¬å¯¹è€å©†çš„ä¸“å±ç”Ÿæ—¥ç¥ç¦è¯­
        const birthdayMessages = [
            "è€å©†ï¼Œç”Ÿæ—¥å¿«ä¹ï¼è°¢è°¢ä½ é™ªæˆ‘èµ°è¿‡å²å²å¹´å¹´ï¼Œå¾€åä½™ç”Ÿï¼Œæˆ‘åªå® ä½ ä¸€äººâ¤ï¸",
            "äº²çˆ±çš„è‰³å®ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ æ°¸è¿œè²Œç¾å¦‚èŠ±ï¼Œå¹³å®‰å–œä¹ï¼Œè€å…¬æ°¸è¿œçˆ±ä½ ï½",
            "æˆ‘çš„å°å…¬ä¸»ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½ç”œç”œèœœèœœï¼Œæ‰€æœ‰ç¾å¥½éƒ½å›´ç»•ç€ä½ ",
            "è€å©†å¤§äººï¼Œç”Ÿæ—¥å¿«ä¹ï¼è¿™ä¸€å¹´è¾›è‹¦å•¦ï¼Œæœªæ¥çš„æ—¥å­æˆ‘ä¼šæ›´åŠªåŠ›ï¼Œç»™ä½ æ›´å¤šå¹¸ç¦",
            "å®è´ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿æ—¶å…‰æ¸©æŸ”å¾…ä½ ï¼Œæˆ‘ä¼šä¸€ç›´ç‰µç€ä½ çš„æ‰‹ï¼Œé™ªä½ èµ°è¿‡æ¯ä¸ªç”Ÿæ—¥",
            "äº²çˆ±çš„è€å©†ï¼Œç”Ÿæ—¥å¿«ä¹ï¼ä½ æ˜¯æˆ‘ç”Ÿå‘½ä¸­æœ€ç¾çš„é£æ™¯ï¼Œä¸€ç”ŸæŒšçˆ±ï¼Œæ°¸ä¸æ”¹å˜",
            "è‰³è‰³ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ æ°¸è¿œä¿æŒç«¥å¿ƒï¼Œæ— å¿§æ— è™‘ï¼Œè€å…¬çš„è‚©è†€æ°¸è¿œä¸ºä½ é ",
            "è€å©†ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ çš„ç”Ÿæ—¥å……æ»¡æƒŠå–œï¼Œæ„¿æˆ‘ä»¬çš„çˆ±æƒ…æ°¸è¿œç‚™çƒ­å¦‚åˆ",
            "æˆ‘çš„å¥³ç¥ï¼Œç”Ÿæ—¥å¿«ä¹ï¼è°¢è°¢ä½ ä¸ºè¿™ä¸ªå®¶çš„ä»˜å‡ºï¼Œæˆ‘ä¼šç”¨ä¸€è¾ˆå­æ¥çæƒœä½ ",
            "å®è´è€å©†ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ–°çš„ä¸€å²ï¼Œæ„¿ä½ è¢«çˆ±åŒ…å›´ï¼Œæƒ³è¦çš„éƒ½æ‹¥æœ‰ï¼Œå¾—ä¸åˆ°çš„éƒ½é‡Šæ€€",
            "äº²çˆ±çš„ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿æˆ‘çš„çˆ±èƒ½æ¸©æš–ä½ çš„æ¯ä¸€å¤©ï¼Œåšä½ æ°¸è¿œçš„é¿é£æ¸¯",
            "è€å©†ï¼Œç”Ÿæ—¥å¿«ä¹ï¼è¿™æ˜¯å±äºä½ çš„æ—¥å­ï¼Œæ‰€æœ‰çš„ç¾å¥½éƒ½è¦ç•™ç»™ä½ ï¼Œæˆ‘çˆ±ä½ ",
            "è‰³å®ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ çœ¼è§’å¸¦ç¬‘ï¼Œçœ‰çœ¼å¦‚åˆï¼Œä½™ç”Ÿçš†ç”œï¼Œè€å…¬é™ªä½ å²å²å¹´å¹´",
            "æˆ‘çš„å°å¯çˆ±ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ æ°¸è¿œå¼€å¿ƒï¼Œæ²¡æœ‰çƒ¦æ¼ï¼Œæˆ‘ä¼šæŠŠæ‰€æœ‰çš„æ¸©æŸ”éƒ½ç»™ä½ ",
            "è€å©†å¤§äººï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ–°çš„ä¸€å²ï¼Œæ„¿ä½ å¥åº·ç¾ä¸½ï¼Œæˆ‘ä»¬çš„å°æ—¥å­è¶Šè¿‡è¶Šç”œ",
            "äº²çˆ±çš„ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„Ÿè°¢ä½ å‡ºç°åœ¨æˆ‘çš„ç”Ÿå‘½é‡Œï¼Œè®©æˆ‘çš„äººç”Ÿå®Œæ•´åˆç¾å¥½",
            "è€å©†ï¼Œç”Ÿæ—¥å¿«ä¹ï¼åƒè¨€ä¸‡è¯­ä¸å¦‚ä¸€å¥æˆ‘çˆ±ä½ ï¼Œå¾€åä½™ç”Ÿï¼Œé£é›ªæ˜¯ä½ ï¼Œå¹³æ·¡æ˜¯ä½ ",
            "è‰³è‰³ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ æƒ³è¦çš„éƒ½å¾—åˆ°ï¼Œå¾—åˆ°çš„éƒ½çæƒœï¼Œè€å…¬æ°¸è¿œåœ¨ä½ èº«è¾¹",
            "å®è´ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ çš„ç”Ÿæ—¥å……æ»¡æ¬¢ä¹ï¼Œæ„¿æˆ‘ä»¬çš„çˆ±æƒ…å¦‚æ˜Ÿå…‰èˆ¬ç’€ç’¨",
            "è€å©†ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ æ°¸è¿œä¿æŒå¿«ä¹ï¼Œæˆ‘ä¼šåŠªåŠ›æˆä¸ºä½ æœ€åšå®çš„ä¾é ",
            "äº²çˆ±çš„ï¼Œç”Ÿæ—¥å¿«ä¹ï¼è¿™ä¸€å¹´çš„é™ªä¼´ï¼Œæ˜¯æˆ‘æœ€çè´µçš„æ—¶å…‰ï¼Œçˆ±ä½ ä¸æ­¢ä¸‰åƒé",
            "æˆ‘çš„è€å©†ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ è¢«å¹¸ç¦å¡«æ»¡ï¼Œè¢«çˆ±æ„åŒ…å›´ï¼Œæ°¸è¿œåšæˆ‘çš„å°å®è´",
            "è‰³å®ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ çš„æ¯ä¸€å¤©éƒ½åƒç”Ÿæ—¥ä¸€æ ·å¿«ä¹ï¼Œè€å…¬ä¼šä¸€ç›´å® ç€ä½ ",
            "è€å©†ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿æˆ‘ä»¬çš„çˆ±æƒ…ç»†æ°´é•¿æµï¼Œå²å²å¹´å¹´ï¼Œä¸ç¦»ä¸å¼ƒ",
            "äº²çˆ±çš„ï¼Œç”Ÿæ—¥å¿«ä¹ï¼ä½ æ˜¯æˆ‘å”¯ä¸€çš„åçˆ±å’Œä¾‹å¤–ï¼Œä½™ç”Ÿè¯·å¤šæŒ‡æ•™â¤ï¸",
            "è€å©†å¤§äººï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ è²Œç¾ä¾æ—§ï¼Œå¿«ä¹åŠ å€ï¼Œçƒ¦æ¼æ¸…é›¶ï¼Œå¹¸ç¦æ»¡æ ¼",
            "è‰³è‰³ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿ä½ æ°¸è¿œæ˜¯é‚£ä¸ªçˆ±ç¬‘çš„å¥³å­©ï¼Œè€å…¬ä¼šå®ˆæŠ¤ä½ çš„æ‰€æœ‰ç¬‘å®¹",
            "å®è´ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ–°çš„ä¸€å²ï¼Œæ„¿ä½ å¹³å®‰å¥åº·ï¼Œäº‹äº‹é¡ºå¿ƒï¼Œæˆ‘çˆ±ä½ æ°¸ä¸å˜",
            "è€å©†ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„Ÿè°¢ä½ çš„åŒ…å®¹å’Œç†è§£ï¼Œæˆ‘ä¼šç”¨è¡ŒåŠ¨è¯æ˜ï¼Œä½ æ˜¯æˆ‘æœ€æ­£ç¡®çš„é€‰æ‹©",
            "äº²çˆ±çš„ï¼Œç”Ÿæ—¥å¿«ä¹ï¼æ„¿æ—¶å…‰ä¸è€ï¼Œæˆ‘ä»¬ä¸æ•£ï¼Œä¸€ç”Ÿä¸€ä¸–ï¼Œæ‰§å­ä¹‹æ‰‹ä¸å­å•è€"
        ];

        // DOMå…ƒç´ 
        const screen1 = document.getElementById('screen1');
        const screen2 = document.getElementById('screen2');
        const screen3 = document.getElementById('screen3');
        const passwordInput = document.getElementById('password');
        const confirmBtn = document.getElementById('confirm-btn');
        const cancelBtn = document.getElementById('cancel-btn');
        const nextBtn = document.getElementById('next-btn');
        const restartBtn = document.getElementById('restart-btn');
        const backToSecondBtn = document.getElementById('back-to-second-btn');
        const bubblesContainer = document.getElementById('bubbles-container');
        const particlesContainer = document.getElementById('particles-container');
        const nameTitle = document.getElementById('name-title');
        const birthdayTitle = document.getElementById('birthday-title');
        const birthdayAudio = document.getElementById('birthday-audio');
        const clickSound = document.getElementById('click-sound');
        const heartSound = document.getElementById('heart-sound');
        const playPauseBtn = document.getElementById('play-pause-btn');
        const volumeSlider = document.getElementById('volume-slider');

        // å…¨å±€å˜é‡
        let isAudioPlaying = false;
        let draggedBubble = null;
        let dragOffsetX = 0;
        let dragOffsetY = 0;

        // æ’­æ”¾/æš‚åœéŸ³æ•ˆ
        function playSound(sound) {
            sound.currentTime = 0;
            sound.play().catch(err => console.log('éŸ³æ•ˆæ’­æ”¾å¤±è´¥:', err));
        }

        // å¯†ç éªŒè¯
        confirmBtn.addEventListener('click', () => {
            playSound(clickSound);
            if (passwordInput.value === '1021') {
                // å¯†ç æ­£ç¡®ï¼Œåˆ›å»ºåº†ç¥ç‰¹æ•ˆ
                createConfetti(screen1, 50);
                
                // åˆ‡æ¢åˆ°ç¬¬äºŒç”»é¢
                screen1.classList.add('hidden');
                setTimeout(() => {
                    screen2.classList.remove('hidden');
                    createBubbles();
                    // å°è¯•æ’­æ”¾ç”Ÿæ—¥æ­Œ
                    playAudio();
                }, 800);
            } else {
                // å¯†ç é”™è¯¯ï¼ŒæŠ–åŠ¨æç¤º
                passwordInput.style.borderColor = '#ff4d4f';
                passwordInput.placeholder = 'å¯†ç é”™è¯¯ï¼Œè¯·é‡è¯•';
                passwordInput.value = '';
                passwordInput.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => {
                    passwordInput.style.borderColor = '#ccc';
                    passwordInput.style.animation = '';
                    passwordInput.placeholder = 'è¯·è¾“å…¥å¯†ç ';
                }, 2000);
            }
        });

        // å–æ¶ˆæŒ‰é’®
        cancelBtn.addEventListener('click', () => {
            playSound(clickSound);
            passwordInput.value = '';
            // å°åŠ¨ç”»åé¦ˆ
            passwordInput.style.transform = 'scale(0.95)';
            setTimeout(() => {
                passwordInput.style.transform = 'scale(1)';
            }, 200);
        });

        // ä¸‹ä¸€é¡µæŒ‰é’®
        nextBtn.addEventListener('click', () => {
            playSound(clickSound);
            // çˆ±å¿ƒç‰¹æ•ˆ
            createHearts(screen2, 20);
            
            screen2.classList.add('hidden');
            setTimeout(() => {
                screen3.classList.remove('hidden');
                createParticles();
                animateTitles();
            }, 500);
        });

        // é‡æ–°å¼€å§‹æŒ‰é’®
        restartBtn.addEventListener('click', () => {
            playSound(clickSound);
            // åº†ç¥ç‰¹æ•ˆ
            createConfetti(screen3, 80);
            
            // éšè—ç¬¬ä¸‰é¡µ
            screen3.classList.add('hidden');
            // æš‚åœå¹¶é‡ç½®éŸ³é¢‘
            birthdayAudio.pause();
            isAudioPlaying = false;
            updatePlayPauseIcon();
            birthdayAudio.currentTime = 0;
            // æ¸…ç©ºæ°”æ³¡å’Œç²’å­
            bubblesContainer.innerHTML = '';
            particlesContainer.innerHTML = '';
            // æ¸…é™¤æ‰€æœ‰äº’åŠ¨å…ƒç´ 
            document.querySelectorAll('.heart, .confetti').forEach(el => el.remove());
            // é‡ç½®æ ‡é¢˜åŠ¨ç”»çŠ¶æ€
            nameTitle.style.opacity = '0';
            nameTitle.style.transform = 'translateY(20px)';
            birthdayTitle.style.opacity = '0';
            birthdayTitle.style.transform = 'translateY(20px)';
            // æ˜¾ç¤ºç¬¬äºŒé¡µ
            setTimeout(() => {
                screen2.classList.remove('hidden');
                // é‡æ–°åˆ›å»ºæ°”æ³¡
                createBubbles();
                // å°è¯•æ’­æ”¾ç”Ÿæ—¥æ­Œ
                playAudio();
            }, 800);
        });

        // è¿”å›ç¬¬äºŒé¡µæŒ‰é’®
        backToSecondBtn.addEventListener('click', () => {
            playSound(clickSound);
            // çˆ±å¿ƒç‰¹æ•ˆ
            createHearts(screen3, 20);
            
            // éšè—ç¬¬ä¸‰é¡µ
            screen3.classList.add('hidden');
            // ä¿ç•™éŸ³é¢‘çŠ¶æ€ï¼Œä¸æ¸…ç©ºæˆ–é‡ç½®éŸ³é¢‘
            // æ¸…ç©ºæ°”æ³¡å’Œç²’å­
            particlesContainer.innerHTML = '';
            // æ¸…é™¤æ‰€æœ‰äº’åŠ¨å…ƒç´ 
            document.querySelectorAll('.heart, .confetti').forEach(el => el.remove());
            // é‡ç½®æ ‡é¢˜åŠ¨ç”»çŠ¶æ€
            nameTitle.style.opacity = '0';
            nameTitle.style.transform = 'translateY(20px)';
            birthdayTitle.style.opacity = '0';
            birthdayTitle.style.transform = 'translateY(20px)';
            // æ˜¾ç¤ºç¬¬äºŒé¡µ
            setTimeout(() => {
                screen2.classList.remove('hidden');
                // é‡æ–°åˆ›å»ºæ°”æ³¡
                createBubbles();
                // ä¸éœ€è¦é‡æ–°æ’­æ”¾éŸ³é¢‘ï¼Œä¿æŒå½“å‰æ’­æ”¾çŠ¶æ€
            }, 500);
        });

        // ä»APIè·å–éŸ³ä¹
        async function fetchMusicFromAPI() {
            try {
                // è°ƒç”¨æ–°çš„éŸ³ä¹APIè·å–éŸ³ä¹æ•°æ®
                const response = await fetch('https://v3.alapi.cn/openapi/14.json', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });
                
                // æ£€æŸ¥å“åº”çŠ¶æ€
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                // è·å–å“åº”æ–‡æœ¬
                const responseText = await response.text();
                console.log('APIå“åº”æ–‡æœ¬:', responseText);
                
                // å°è¯•è§£æJSONï¼Œæ·»åŠ æ›´ä¸¥æ ¼çš„é”™è¯¯å¤„ç†
                let data;
                try {
                    // é¦–å…ˆæ£€æŸ¥å“åº”æ–‡æœ¬æ˜¯å¦ä¸ºç©ºæˆ–åŒ…å«æ— æ•ˆå­—ç¬¦
                    if (!responseText || responseText.trim().startsWith('-')) {
                        console.error('APIè¿”å›æ— æ•ˆå“åº”æ ¼å¼');
                        console.log('ä½¿ç”¨é»˜è®¤éŸ³ä¹');
                        return;
                    }
                    data = JSON.parse(responseText);
                    console.log('APIå“åº”JSON:', data);
                } catch (jsonError) {
                    console.error('JSONè§£æå¤±è´¥:', jsonError);
                    console.log('ä½¿ç”¨é»˜è®¤éŸ³ä¹');
                    return;
                }
                
                // æ£€æŸ¥APIå“åº”ï¼Œæ ¹æ®æ–°APIçš„è¿”å›æ ¼å¼è°ƒæ•´
                if (data && data.success && data.data) {
                    if (data.data.music_url) {
                        // å¦‚æœAPIè¿”å›äº†éŸ³ä¹URLï¼Œæ›´æ–°éŸ³é¢‘æº
                        const source = birthdayAudio.querySelector('source');
                        source.src = data.data.music_url;
                        source.type = 'audio/mpeg';
                        birthdayAudio.load();
                        console.log('å·²ä»APIè·å–éŸ³ä¹:', data.data.music_url);
                    } else if (data.data.url) {
                        // å…¼å®¹å…¶ä»–å¯èƒ½çš„éŸ³ä¹URLå­—æ®µå
                        const source = birthdayAudio.querySelector('source');
                        source.src = data.data.url;
                        source.type = 'audio/mpeg';
                        birthdayAudio.load();
                        console.log('å·²ä»APIè·å–éŸ³ä¹:', data.data.url);
                    } else {
                        console.log('APIæœªè¿”å›æœ‰æ•ˆéŸ³ä¹URLï¼Œä½¿ç”¨é»˜è®¤éŸ³ä¹');
                    }
                } else {
                    console.log('APIå“åº”æ ¼å¼ä¸æ­£ç¡®ï¼Œä½¿ç”¨é»˜è®¤éŸ³ä¹');
                }
            } catch (error) {
                console.error('APIè°ƒç”¨å¤±è´¥:', error);
                console.log('ä½¿ç”¨é»˜è®¤éŸ³ä¹');
            }
        }

        // éŸ³é¢‘æ§åˆ¶
        async function playAudio() {
            // å°è¯•ä»APIè·å–éŸ³ä¹
            await fetchMusicFromAPI();
            
            birthdayAudio.volume = volumeSlider.value;
            birthdayAudio.play().then(() => {
                isAudioPlaying = true;
                updatePlayPauseIcon();
            }).catch(err => {
                console.log('éŸ³é¢‘æ’­æ”¾éœ€è¦ç”¨æˆ·äº¤äº’:', err);
                // æç¤ºç”¨æˆ·ç‚¹å‡»æ’­æ”¾
                const audioTip = document.createElement('div');
                audioTip.style.position = 'absolute';
                audioTip.style.top = '20px';
                audioTip.style.left = '50%';
                audioTip.style.transform = 'translateX(-50%)';
                audioTip.style.backgroundColor = 'rgba(255,107,157,0.9)';
                audioTip.style.color = 'white';
                audioTip.style.padding = '10px 20px';
                audioTip.style.borderRadius = '25px';
                audioTip.style.zIndex = '999';
                audioTip.innerHTML = 'ğŸµ ç‚¹å‡»é¡µé¢ä»»æ„ä½ç½®æ’­æ”¾ç”Ÿæ—¥æ­Œ';
                screen2.appendChild(audioTip);
                
                // ç‚¹å‡»é¡µé¢æ’­æ”¾éŸ³é¢‘
                screen2.addEventListener('click', () => {
                    playAudio();
                    audioTip.remove();
                }, { once: true });
            });
        }

        // æ’­æ”¾/æš‚åœæŒ‰é’®
        playPauseBtn.addEventListener('click', () => {
            playSound(clickSound);
            if (isAudioPlaying) {
                birthdayAudio.pause();
                isAudioPlaying = false;
            } else {
                // è°ƒç”¨å®Œæ•´çš„playAudioå‡½æ•°ï¼Œç¡®ä¿è®¾ç½®éŸ³é‡å’Œå¤„ç†æ’­æ”¾å¤±è´¥
                playAudio();
            }
            updatePlayPauseIcon();
        });

        // æ›´æ–°æ’­æ”¾/æš‚åœå›¾æ ‡
        function updatePlayPauseIcon() {
            playPauseBtn.innerHTML = isAudioPlaying ? 
                '<i class="fa fa-pause"></i>' : 
                '<i class="fa fa-play"></i>';
        }

        // éŸ³é‡è°ƒèŠ‚
        volumeSlider.addEventListener('input', () => {
            birthdayAudio.volume = volumeSlider.value;
        });

        // åˆ›å»ºèŠå¤©æ°”æ³¡ï¼ˆå¸¦äº’åŠ¨ï¼‰
        function createBubbles() {
            bubblesContainer.innerHTML = '';
            
            // æ°”æ³¡é¢œè‰²æ•°ç»„
            const bubbleColors = [
                'linear-gradient(135deg, rgba(255, 107, 157, 0.9) 0%, rgba(255, 158, 83, 0.9) 100%)',
                'linear-gradient(135deg, rgba(78, 205, 196, 0.9) 0%, rgba(85, 98, 112, 0.9) 100%)',
                'linear-gradient(135deg, rgba(255, 230, 109, 0.9) 0%, rgba(255, 107, 157, 0.9) 100%)',
                'linear-gradient(135deg, rgba(147, 112, 219, 0.9) 0%, rgba(78, 205, 196, 0.9) 100%)'
            ];
            
            // æ ¹æ®å±å¹•å®½åº¦è°ƒæ•´æ°”æ³¡æ•°é‡
            const isMobile = window.innerWidth < 768;
            const bubbleCount = isMobile ? 15 : 30;
            const cols = isMobile ? 3 : 6;
            
            // åˆ›å»ºæ°”æ³¡
            for (let i = 0; i < bubbleCount; i++) {
                const bubble = document.createElement('div');
                bubble.classList.add('chat-bubble');
                
                // ç½‘æ ¼å¸ƒå±€åˆ†é…ä½ç½®
                const col = i % cols;
                const row = Math.floor(i / cols);
                const x = (col * (100 / cols)) + 2 + Math.random() * 5;
                const y = (row * 20) + 3 + Math.random() * 6;
                
                // æ ¹æ®å±å¹•å®½åº¦è°ƒæ•´æ°”æ³¡å¤§å°
                const size = isMobile ? Math.random() * 15 + 90 : Math.random() * 20 + 110;
                
                // éšæœºé¢œè‰²
                const colorIndex = Math.floor(Math.random() * bubbleColors.length);
                
                // æ°”æ³¡æ ·å¼
                bubble.style.left = `${x}%`;
                bubble.style.top = `${y}%`;
                bubble.style.width = `${size}px`;
                bubble.style.background = bubbleColors[colorIndex];
                // éšæœºåŠ¨ç”»å»¶è¿Ÿ
                bubble.style.animationDelay = `${Math.random() * 2}s`;
                
                // Hello Kittyå›¾æ ‡
                const kittyImg = document.createElement('img');
                kittyImg.src = 'https://p9-flow-imagex-sign.byteimg.com/tos-cn-i-a9rns2rl98/rc/pc/super_tool/85958abd247147a08b586313ee6943fb~tplv-a9rns2rl98-image.image?rcl=202511251645282E1CDFDC3EBD08D4FBCD&rk3s=8e244e95&rrcfp=f06b921b&x-expires=1766652391&x-signature=nmvkwzL%2FJXtk9ZRf2r8Al0hwujs%3D';
                kittyImg.style.width = isMobile ? '40px' : '50px';
                kittyImg.style.height = isMobile ? '40px' : '50px';
                kittyImg.style.display = 'block';
                kittyImg.style.margin = '0 auto 8px';
                
                // ç¥ç¦æ–‡å­—
                const message = document.createElement('p');
                message.textContent = birthdayMessages[i];
                message.style.margin = '0';
                message.style.textAlign = 'center';
                message.style.fontSize = isMobile ? '12px' : '14px';
                message.style.fontWeight = 'bold';
                message.style.lineHeight = '1.4';
                
                // æ°”æ³¡äº’åŠ¨æŒ‰é’®
                const actionsDiv = document.createElement('div');
                actionsDiv.classList.add('bubble-actions');
                
                // çˆ±å¿ƒæŒ‰é’®
                const heartBtn = document.createElement('button');
                heartBtn.classList.add('bubble-btn');
                heartBtn.innerHTML = '<i class="fa fa-heart"></i>';
                heartBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    playSound(heartSound);
                    // åˆ›å»ºçˆ±å¿ƒç‰¹æ•ˆ
                    createHeart(bubble);
                    // æ°”æ³¡é«˜äº®
                    bubble.classList.add('active');
                    setTimeout(() => {
                        bubble.classList.remove('active');
                    }, 1500);
                });
                
                // ç‚¹èµæŒ‰é’®
                const likeBtn = document.createElement('button');
                likeBtn.classList.add('bubble-btn');
                likeBtn.innerHTML = '<i class="fa fa-thumbs-up"></i>';
                likeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    playSound(clickSound);
                    // ç‚¹èµåŠ¨ç”»
                    likeBtn.style.transform = 'scale(1.5) rotate(10deg)';
                    setTimeout(() => {
                        likeBtn.style.transform = '';
                    }, 500);
                });
                
                // ç»„è£…æ°”æ³¡
                actionsDiv.appendChild(heartBtn);
                actionsDiv.appendChild(likeBtn);
                bubble.appendChild(kittyImg);
                bubble.appendChild(message);
                bubble.appendChild(actionsDiv);
                bubblesContainer.appendChild(bubble);
                
                // æ°”æ³¡ç‚¹å‡»äº‹ä»¶
                bubble.addEventListener('click', () => {
                    playSound(clickSound);
                    bubble.classList.add('active');
                    setTimeout(() => {
                        bubble.classList.remove('active');
                    }, 1000);
                });
                
                // æ°”æ³¡æ‹–æ‹½åŠŸèƒ½
                bubble.addEventListener('mousedown', startDrag);
                bubble.addEventListener('touchstart', startDrag, { passive: true });
                
                // é€ä¸ªå¼¹å‡ºæ°”æ³¡
                setTimeout(() => {
                    bubble.style.opacity = '1';
                    bubble.style.transform = 'scale(1)';
                }, i * 180);
            }
        }

        // æ‹–æ‹½åŠŸèƒ½
        function startDrag(e) {
            playSound(clickSound);
            draggedBubble = this;
            
            // è·å–åç§»é‡
            const rect = draggedBubble.getBoundingClientRect();
            if (e.type === 'mousedown') {
                dragOffsetX = e.clientX - rect.left;
                dragOffsetY = e.clientY - rect.top;
            } else { // touchstart
                dragOffsetX = e.touches[0].clientX - rect.left;
                dragOffsetY = e.touches[0].clientY - rect.top;
            }
            
            // æå‡å±‚çº§
            draggedBubble.style.zIndex = 100;
            
            // æ·»åŠ ç§»åŠ¨/ç»“æŸäº‹ä»¶
            document.addEventListener('mousemove', dragBubble);
            document.addEventListener('touchmove', dragBubble, { passive: true });
            document.addEventListener('mouseup', endDrag);
            document.addEventListener('touchend', endDrag);
        }

        function dragBubble(e) {
            if (!draggedBubble) return;
            
            e.preventDefault();
            
            // è·å–é¼ æ ‡/è§¦æ‘¸ä½ç½®
            let clientX, clientY;
            if (e.type === 'mousemove') {
                clientX = e.clientX;
                clientY = e.clientY;
            } else { // touchmove
                clientX = e.touches[0].clientX;
                clientY = e.touches[0].clientY;
            }
            
            // è®¡ç®—æ–°ä½ç½®
            const newX = clientX - dragOffsetX;
            const newY = clientY - dragOffsetY;
            
            // æ›´æ–°æ°”æ³¡ä½ç½®
            draggedBubble.style.left = `${newX}px`;
            draggedBubble.style.top = `${newY}px`;
            // å–æ¶ˆç™¾åˆ†æ¯”å®šä½
            draggedBubble.style.removeProperty('width');
        }

        function endDrag() {
            if (draggedBubble) {
                draggedBubble.style.zIndex = 10;
            }
            draggedBubble = null;
            
            // ç§»é™¤äº‹ä»¶ç›‘å¬
            document.removeEventListener('mousemove', dragBubble);
            document.removeEventListener('touchmove', dragBubble);
            document.removeEventListener('mouseup', endDrag);
            document.removeEventListener('touchend', endDrag);
        }

        // åˆ›å»ºç²’å­æ•ˆæœ
        function createParticles() {
            particlesContainer.innerHTML = '';
            // æ ¹æ®å±å¹•å®½åº¦è°ƒæ•´ç²’å­æ•°é‡
            const isMobile = window.innerWidth < 768;
            const particleCount = isMobile ? 300 : 1000;
            const particleColors = ['#FF6B9D', '#4ECDC4', '#FFE66D', '#F7FFF7'];
            
            // ç”Ÿæˆç²’å­
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                const size = Math.random() * 5 + 1;
                const x = Math.random() * particlesContainer.offsetWidth;
                const y = Math.random() * particlesContainer.offsetHeight;
                const colorIndex = Math.floor(Math.random() * particleColors.length);
                
                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${x}px`;
                particle.style.top = `${y}px`;
                particle.style.backgroundColor = particleColors[colorIndex];
                particlesContainer.appendChild(particle);
            }
            
            // ç²’å­äº’åŠ¨ï¼šé¼ æ ‡è·Ÿéšï¼ˆä»…åœ¨éç§»åŠ¨è®¾å¤‡ä¸Šå¯ç”¨ï¼‰
            if (!isMobile) {
                particlesContainer.addEventListener('mousemove', (e) => {
                    const particles = document.querySelectorAll('.particle');
                    particles.forEach((particle, index) => {
                        if (index % 15 === 0) { // æ¯15ä¸ªç²’å­ä¸­é€‰1ä¸ªè·Ÿéšï¼Œé¿å…å¡é¡¿
                            const dx = e.clientX - parseFloat(particle.style.left);
                            const dy = e.clientY - parseFloat(particle.style.top);
                            const distance = Math.sqrt(dx * dx + dy * dy);
                            
                            if (distance < 100) {
                                // é è¿‘é¼ æ ‡çš„ç²’å­ä¼šè½»å¾®ç§»åŠ¨
                                particle.style.transition = 'all 0.3s ease';
                                particle.style.left = `${parseFloat(particle.style.left) + dx * 0.1}px`;
                                particle.style.top = `${parseFloat(particle.style.top) + dy * 0.1}px`;
                            }
                        }
                    });
                });
            }
            
            // ç²’å­èšç„¦åŠ¨ç”»
            animateParticles();
        }

        // ç²’å­èšç„¦åˆ°æ–‡å­—
        function animateParticles() {
            const particles = document.querySelectorAll('.particle');
            const nameTitleRect = nameTitle.getBoundingClientRect();
            const birthdayTitleRect = birthdayTitle.getBoundingClientRect();
            
            const nameParticles = Array.from(particles).slice(0, 500);
            const birthdayParticles = Array.from(particles).slice(500);
            
            // èšç„¦åˆ°è€å©†åå­—
            nameParticles.forEach((particle, index) => {
                const targetX = nameTitleRect.left + Math.random() * nameTitleRect.width;
                const targetY = nameTitleRect.top + Math.random() * nameTitleRect.height;
                setTimeout(() => {
                    particle.style.transition = `all ${Math.random() * 3 + 2}s ease`;
                    particle.style.left = `${targetX}px`;
                    particle.style.top = `${targetY}px`;
                }, index * 4);
            });
            
            // èšç„¦åˆ°ç”Ÿæ—¥æ–‡å­—
            birthdayParticles.forEach((particle, index) => {
                const targetX = birthdayTitleRect.left + Math.random() * birthdayTitleRect.width;
                const targetY = birthdayTitleRect.top + Math.random() * birthdayTitleRect.height;
                setTimeout(() => {
                    particle.style.transition = `all ${Math.random() * 3 + 2}s ease`;
                    particle.style.left = `${targetX}px`;
                    particle.style.top = `${targetY}px`;
                }, index * 4 + 800);
            });
            
            // æ ‡é¢˜ç‚¹å‡»äº’åŠ¨
            nameTitle.addEventListener('click', () => {
                playSound(heartSound);
                createHearts(screen3, 30);
                // æ–‡å­—æ”¾å¤§åŠ¨ç”»
                nameTitle.style.transform = 'scale(1.2) translateY(0)';
                setTimeout(() => {
                    nameTitle.style.transform = 'scale(1) translateY(0)';
                }, 1000);
            });
            
            birthdayTitle.addEventListener('click', () => {
                playSound(clickSound);
                createConfetti(screen3, 40);
            });
        }

        // æ ‡é¢˜åŠ¨ç”»
        function animateTitles() {
            setTimeout(() => {
                nameTitle.style.opacity = '1';
                nameTitle.style.transform = 'translateY(0)';
            }, 1800);
            
            setTimeout(() => {
                birthdayTitle.style.opacity = '1';
                birthdayTitle.style.transform = 'translateY(0)';
            }, 2800);
        }

        // åˆ›å»ºçˆ±å¿ƒç‰¹æ•ˆ
        function createHeart(parent) {
            const heart = document.createElement('div');
            heart.classList.add('heart');
            
            // å®šä½åœ¨çˆ¶å…ƒç´ ä¸­å¿ƒ
            const rect = parent.getBoundingClientRect();
            const x = rect.left + rect.width / 2 - 10;
            const y = rect.top + rect.height / 2 - 10;
            
            heart.style.left = `${x}px`;
            heart.style.top = `${y}px`;
            
            document.body.appendChild(heart);
            
            // çˆ±å¿ƒæ¼‚æµ®åŠ¨ç”»
            setTimeout(() => {
                heart.style.transition = 'all 1.5s ease-out';
                heart.style.left = `${x + (Math.random() - 0.5) * 100}px`;
                heart.style.top = `${y - 100 + (Math.random() - 0.5) * 50}px`;
                heart.style.opacity = '0';
            }, 100);
            
            // ç§»é™¤çˆ±å¿ƒ
            setTimeout(() => {
                heart.remove();
            }, 1600);
        }

        // åˆ›å»ºå¤šä¸ªçˆ±å¿ƒ
        function createHearts(container, count) {
            for (let i = 0; i < count; i++) {
                setTimeout(() => {
                    const heart = document.createElement('div');
                    heart.classList.add('heart');
                    
                    // éšæœºä½ç½®
                    const x = Math.random() * container.offsetWidth;
                    const y = Math.random() * container.offsetHeight;
                    
                    heart.style.left = `${x}px`;
                    heart.style.top = `${y}px`;
                    heart.style.background = `rgb(${255}, ${Math.floor(Math.random() * 100) + 100}, ${Math.floor(Math.random() * 150) + 100})`;
                    
                    container.appendChild(heart);
                    
                    // æ¼‚æµ®åŠ¨ç”»
                    setTimeout(() => {
                        heart.style.transition = `all ${Math.random() * 2 + 1}s ease-out`;
                        heart.style.left = `${x + (Math.random() - 0.5) * 200}px`;
                        heart.style.top = `${y - 150 + (Math.random() - 0.5) * 100}px`;
                        heart.style.opacity = '0';
                    }, 100);
                    
                    setTimeout(() => {
                        heart.remove();
                    }, 2000);
                }, i * 50);
            }
        }

        // åˆ›å»ºå½©å¸¦åŠ¨ç”»
        function createConfetti(container, count) {
            const colors = ['#FF6B9D', '#4ECDC4', '#FFE66D', '#9370DB', '#FF8E53', '#FFFFFF'];
            
            for (let i = 0; i < count; i++) {
                const confetti = document.createElement('div');
                confetti.classList.add('confetti');
                
                // éšæœºæ ·å¼
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = `${Math.random() * 50}%`;
                confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                confetti.style.width = `${Math.random() * 10 + 5}px`;
                confetti.style.height = `${Math.random() * 10 + 5}px`;
                confetti.style.animation = `confetti ${Math.random() * 2 + 2}s ease-in-out forwards`;
                confetti.style.animationDelay = `${Math.random() * 1}s`;
                
                container.appendChild(confetti);
                
                // ç§»é™¤å½©å¸¦
                setTimeout(() => {
                    confetti.remove();
                }, 4000);
            }
        }



        // å…¨å±€ç‚¹å‡»åˆ›å»ºå°çˆ±å¿ƒ
        document.addEventListener('click', (e) => {
            if (screen2.classList.contains('hidden') && screen3.classList.contains('hidden')) return;
            
            // éšæœºåˆ›å»ºçˆ±å¿ƒ
            if (Math.random() > 0.7) {
                const heart = document.createElement('div');
                heart.classList.add('heart');
                heart.style.left = `${e.clientX - 10}px`;
                heart.style.top = `${e.clientY - 10}px`;
                heart.style.width = '15px';
                heart.style.height = '15px';
                heart.style.opacity = '0.8';
                
                document.body.appendChild(heart);
                
                setTimeout(() => {
                    heart.style.transition = 'all 1s ease-out';
                    heart.style.opacity = '0';
                    heart.style.transform = 'rotate(45deg) translateY(-20px) scale(0.5)';
                }, 100);
                
                setTimeout(() => {
                    heart.remove();
                }, 1100);
            }
        });

        // é”®ç›˜äº‹ä»¶ç›‘å¬
        document.addEventListener('keydown', (e) => {
            // å›è½¦é”®ç¡®è®¤å¯†ç 
            if (e.key === 'Enter' && !screen1.classList.contains('hidden')) {
                confirmBtn.click();
            }
            
            // ç©ºæ ¼é”®åˆ‡æ¢ç”»é¢
            if (e.key === ' ' && !screen2.classList.contains('hidden')) {
                nextBtn.click();
            }
            
            // ESCé”®å›åˆ°ç¬¬ä¸€é¡µ
            if (e.key === 'Escape') {
                restartBtn.click();
            }
        });

        // é¡µé¢åŠ è½½åˆå§‹åŒ–
        window.addEventListener('load', () => {
            birthdayAudio.load();
            // è®¾ç½®éŸ³é‡
            birthdayAudio.volume = volumeSlider.value;
            
            // åˆå§‹çŠ¶æ€
            screen2.classList.add('hidden');
            screen3.classList.add('hidden');
            
            // æ·»åŠ æŠ–åŠ¨åŠ¨ç”»
            const style = document.createElement('style');
            style.textContent = `
                @keyframes shake {
                    0%, 100% { transform: translateX(0); }
                    25% { transform: translateX(-5px); }
                    75% { transform: translateX(5px); }
                }
            `;
            document.head.appendChild(style);
        });

        // çª—å£å¤§å°å˜åŒ–æ—¶é‡æ–°å®šä½å…ƒç´ 
        window.addEventListener('resize', () => {
            if (draggedBubble) {
                endDrag();
            }
        });
    </script>
</body>
</html>
